import{c as R,b as Ne,r as l,d as _,j as e,P as N,e as v,f as T,S as ye,D as we,g as Ce,h as De,k as Re,l as P,n as y,X as H,B as b,T as ke,J as C,u as Ee,a as q,L as w,m as u,o as F,p as z,q as W,s as B,t as Ie,v as Pe,H as _e}from"./index-CqzIR2bM.js";import{H as Te,B as Ae}from"./badge-GuCSQAZf.js";import{R as $e,h as Oe,u as Se,F as Le,L as Me}from"./index-nibNnigF.js";import{S as Fe}from"./share-2-DxyxUD_v.js";import{L as V}from"./LoadingSpinner-DEWClWbu.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=R("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=R("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=R("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=R("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var A="Dialog",[G,gt]=Ne(A),[He,m]=G(A),U=t=>{const{__scopeDialog:s,children:a,open:n,defaultOpen:i,onOpenChange:o,modal:r=!0}=t,c=l.useRef(null),d=l.useRef(null),[x=!1,j]=Re({prop:n,defaultProp:i,onChange:o});return e.jsx(He,{scope:s,triggerRef:c,contentRef:d,contentId:P(),titleId:P(),descriptionId:P(),open:x,onOpenChange:j,onOpenToggle:l.useCallback(()=>j(k=>!k),[j]),modal:r,children:a})};U.displayName=A;var J="DialogTrigger",qe=l.forwardRef((t,s)=>{const{__scopeDialog:a,...n}=t,i=m(J,a),o=_(s,i.triggerRef);return e.jsx(N.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":S(i.open),...n,ref:o,onClick:v(t.onClick,i.onOpenToggle)})});qe.displayName=J;var $="DialogPortal",[Ge,Y]=G($,{forceMount:void 0}),K=t=>{const{__scopeDialog:s,forceMount:a,children:n,container:i}=t,o=m($,s);return e.jsx(Ge,{scope:s,forceMount:a,children:l.Children.map(n,r=>e.jsx(T,{present:a||o.open,children:e.jsx(De,{asChild:!0,container:i,children:r})}))})};K.displayName=$;var D="DialogOverlay",X=l.forwardRef((t,s)=>{const a=Y(D,t.__scopeDialog),{forceMount:n=a.forceMount,...i}=t,o=m(D,t.__scopeDialog);return o.modal?e.jsx(T,{present:n||o.open,children:e.jsx(Ue,{...i,ref:s})}):null});X.displayName=D;var Ue=l.forwardRef((t,s)=>{const{__scopeDialog:a,...n}=t,i=m(D,a);return e.jsx($e,{as:ye,allowPinchZoom:!0,shards:[i.contentRef],children:e.jsx(N.div,{"data-state":S(i.open),...n,ref:s,style:{pointerEvents:"auto",...n.style}})})}),h="DialogContent",Z=l.forwardRef((t,s)=>{const a=Y(h,t.__scopeDialog),{forceMount:n=a.forceMount,...i}=t,o=m(h,t.__scopeDialog);return e.jsx(T,{present:n||o.open,children:o.modal?e.jsx(Je,{...i,ref:s}):e.jsx(Ye,{...i,ref:s})})});Z.displayName=h;var Je=l.forwardRef((t,s)=>{const a=m(h,t.__scopeDialog),n=l.useRef(null),i=_(s,a.contentRef,n);return l.useEffect(()=>{const o=n.current;if(o)return Oe(o)},[]),e.jsx(Q,{...t,ref:i,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:v(t.onCloseAutoFocus,o=>{var r;o.preventDefault(),(r=a.triggerRef.current)==null||r.focus()}),onPointerDownOutside:v(t.onPointerDownOutside,o=>{const r=o.detail.originalEvent,c=r.button===0&&r.ctrlKey===!0;(r.button===2||c)&&o.preventDefault()}),onFocusOutside:v(t.onFocusOutside,o=>o.preventDefault())})}),Ye=l.forwardRef((t,s)=>{const a=m(h,t.__scopeDialog),n=l.useRef(!1),i=l.useRef(!1);return e.jsx(Q,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var r,c;(r=t.onCloseAutoFocus)==null||r.call(t,o),o.defaultPrevented||(n.current||(c=a.triggerRef.current)==null||c.focus(),o.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:o=>{var d,x;(d=t.onInteractOutside)==null||d.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const r=o.target;((x=a.triggerRef.current)==null?void 0:x.contains(r))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),Q=l.forwardRef((t,s)=>{const{__scopeDialog:a,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:o,...r}=t,c=m(h,a),d=l.useRef(null),x=_(s,d);return Se(),e.jsxs(e.Fragment,{children:[e.jsx(Le,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:o,children:e.jsx(we,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":S(c.open),...r,ref:x,onDismiss:()=>c.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(Ke,{titleId:c.titleId}),e.jsx(Ze,{contentRef:d,descriptionId:c.descriptionId})]})]})}),O="DialogTitle",ee=l.forwardRef((t,s)=>{const{__scopeDialog:a,...n}=t,i=m(O,a);return e.jsx(N.h2,{id:i.titleId,...n,ref:s})});ee.displayName=O;var te="DialogDescription",se=l.forwardRef((t,s)=>{const{__scopeDialog:a,...n}=t,i=m(te,a);return e.jsx(N.p,{id:i.descriptionId,...n,ref:s})});se.displayName=te;var ae="DialogClose",oe=l.forwardRef((t,s)=>{const{__scopeDialog:a,...n}=t,i=m(ae,a);return e.jsx(N.button,{type:"button",...n,ref:s,onClick:v(t.onClick,()=>i.onOpenChange(!1))})});oe.displayName=ae;function S(t){return t?"open":"closed"}var ne="DialogTitleWarning",[ut,ie]=Ce(ne,{contentName:h,titleName:O,docsSlug:"dialog"}),Ke=({titleId:t})=>{const s=ie(ne),a=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return l.useEffect(()=>{t&&(document.getElementById(t)||console.error(a))},[a,t]),null},Xe="DialogDescriptionWarning",Ze=({contentRef:t,descriptionId:s})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ie(Xe).contentName}}.`;return l.useEffect(()=>{var o;const i=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");s&&i&&(document.getElementById(s)||console.warn(n))},[n,t,s]),null},Qe=U,et=K,re=X,le=Z,ce=ee,de=se,me=oe;const tt=Qe,st=et,at=me,ge=l.forwardRef(({className:t,...s},a)=>e.jsx(re,{ref:a,className:y("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));ge.displayName=re.displayName;const ue=l.forwardRef(({className:t,children:s,...a},n)=>e.jsxs(st,{children:[e.jsx(ge,{}),e.jsxs(le,{ref:n,className:y("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a,children:[s,e.jsxs(me,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ue.displayName=le.displayName;const pe=({className:t,...s})=>e.jsx("div",{className:y("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});pe.displayName="DialogHeader";const xe=l.forwardRef(({className:t,...s},a)=>e.jsx(ce,{ref:a,className:y("text-lg font-semibold leading-none tracking-tight",t),...s}));xe.displayName=ce.displayName;const ot=l.forwardRef(({className:t,...s},a)=>e.jsx(de,{ref:a,className:y("text-sm text-muted-foreground",t),...s}));ot.displayName=de.displayName;const nt=({title:t,url:s,onClose:a})=>{const n=()=>{const r=`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}&url=${encodeURIComponent(s)}`;window.open(r,"_blank")},i=()=>{const r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(s)}`;window.open(r,"_blank")},o=()=>{navigator.clipboard.writeText(s).then(()=>{C.success("¡Enlace copiado al portapapeles!")}).catch(()=>{C.error("No se pudo copiar el enlace")})};return e.jsx(tt,{open:!0,onOpenChange:a,children:e.jsxs(ue,{className:"sm:max-w-md",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Compartir"}),e.jsx(at,{asChild:!0,children:e.jsx(b,{variant:"ghost",className:"absolute top-2 right-2 p-2 h-auto rounded-full",onClick:a,children:e.jsx(H,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs(b,{variant:"outline",className:"flex-1",onClick:n,children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Twitter"]}),e.jsxs(b,{variant:"outline",className:"flex-1",onClick:i,children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Facebook"]}),e.jsxs(b,{variant:"outline",className:"flex-1",onClick:o,children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Copiar"]})]})]})]})})};function it({character:t}){const{isAuthenticated:s,user:a}=Ee(),{voteForCharacter:n,hasUserVotedFor:i}=q(),[o,r]=l.useState(!1),[c,d]=l.useState(!1),[x,j]=l.useState(!1),[k,L]=l.useState(!1),[M,E]=l.useState(!1);l.useEffect(()=>{s&&a&&d(i(t.id,a.id))},[s,a,t.id,i]);const fe=async()=>{if(!s){C.error("Debes iniciar sesión para votar");return}j(!0),await n(t.id),d(!0),j(!1),C.success(`¡Has votado por ${t.name}!`)},he={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},p={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},je=()=>t.image&&(t.image.startsWith("data:image")||t.image.includes("base64"))||t.image&&t.image.startsWith("http")?t.image:t.id==="birillo-impazzito"?"/images/Birillo-Impazzito.webp":t.image&&t.image.startsWith("/images/")?t.image:t.id&&t.id.startsWith("custom_")?(console.warn("Personaje personalizado sin imagen válida:",t.name),"/images/placeholder.webp"):`/images/${t.name.replace(/\s+/g,"-").toLowerCase()}.webp`,be=()=>{L(!0),E(!0)},ve=()=>{E(!0)};return l.useEffect(()=>{L(!1),E(!1)},[t.id]),e.jsxs("div",{className:"container mx-auto px-4 py-8 bg-brainrot-darker min-h-screen",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(w,{to:"/personajes",className:"inline-flex items-center text-gray-400 hover:text-brainrot-turquoise transition-colors",children:[e.jsx(ze,{size:20}),e.jsx("span",{children:"Volver a personajes"})]})}),e.jsxs(u.div,{variants:he,initial:"hidden",animate:"visible",className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(u.div,{variants:p,className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-brainrot-light rounded-xl overflow-hidden shadow-xl mb-4 relative",children:[!M&&e.jsx("div",{className:"w-full h-[400px] flex items-center justify-center bg-brainrot-dark",children:e.jsx("div",{className:"w-10 h-10 border-4 border-brainrot-turquoise border-t-transparent rounded-full animate-spin"})}),e.jsx("img",{src:k?"/images/placeholder.webp":je(),alt:t.name,className:`w-full h-[400px] object-contain object-center bg-brainrot-darker transition-all duration-300 ${M?"opacity-100":"opacity-0 absolute"}`,onError:be,onLoad:ve})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx(F,{children:e.jsxs(z,{children:[e.jsx(W,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",className:`rounded-full ${c?"bg-red-500 text-white hover:bg-red-600":"bg-white bg-opacity-20 hover:bg-opacity-30 text-white"}`,onClick:fe,disabled:!s,children:e.jsx(Te,{className:`h-5 w-5 ${c?"fill-current":""}`})})}),e.jsx(B,{children:e.jsx("p",{children:c?"Ya has votado":"Votar por este personaje"})})]})}),e.jsx(F,{children:e.jsxs(z,{children:[e.jsx(W,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",className:"rounded-full bg-white bg-opacity-20 hover:bg-opacity-30 text-white",onClick:()=>r(!0),children:e.jsx(Fe,{className:"h-5 w-5"})})}),e.jsx(B,{children:e.jsx("p",{children:"Compartir personaje"})})]})})]}),!s&&e.jsxs("div",{className:"bg-brainrot-dark p-4 rounded-lg border border-amber-600 flex items-center text-sm mb-4",children:[e.jsx(We,{className:"h-4 w-4 text-amber-500 mr-2 flex-shrink-0"}),e.jsxs("p",{className:"text-amber-500",children:[e.jsx(w,{to:"/login",className:"underline font-medium hover:text-amber-400",children:"Inicia sesión"})," para votar por este personaje."]})]})]}),e.jsxs(u.div,{variants:p,className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white",children:t.name}),e.jsx(Ae,{className:"bg-brainrot-blue border-none text-white",children:t.type})]}),e.jsxs(u.div,{variants:p,className:"bg-brainrot-light p-6 rounded-xl mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-3",children:"Biografía"}),e.jsx("p",{className:"text-gray-300 leading-relaxed whitespace-pre-line",children:t.biography||"No hay información biográfica disponible para este personaje."})]}),t.abilities&&t.abilities.length>0&&e.jsxs(u.div,{variants:p,className:"bg-brainrot-light p-6 rounded-xl mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-3",children:"Habilidades"}),e.jsx("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:t.abilities.map((g,f)=>e.jsx("li",{className:"leading-relaxed",children:g},f))})]}),t.appearances&&t.appearances.length>0&&e.jsxs(u.div,{variants:p,className:"bg-brainrot-light p-6 rounded-xl mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-3",children:"Apariciones Notables"}),e.jsx("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:t.appearances.map((g,f)=>e.jsx("li",{className:"leading-relaxed",children:g},f))})]}),e.jsx(u.div,{variants:p,className:"grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6",children:e.jsxs("div",{className:"bg-brainrot-light p-4 rounded-xl text-center",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1 capitalize",children:"Poder"}),e.jsxs("p",{className:"text-2xl font-bold text-brainrot-turquoise",children:[t.power,"/10"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[t.allies&&t.allies.length>0&&e.jsxs(u.div,{variants:p,className:"bg-brainrot-light p-6 rounded-xl",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-3",children:"Aliados"}),e.jsx("ul",{className:"space-y-2",children:t.allies.map((g,f)=>{const I=g.toLowerCase().replace(/\s+/g,"-");return e.jsx("li",{children:e.jsx(w,{to:`/personajes/${I}`,className:"text-brainrot-turquoise hover:underline",children:g})},f)})})]}),t.rivals&&t.rivals.length>0&&e.jsxs(u.div,{variants:p,className:"bg-brainrot-light p-6 rounded-xl",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-3",children:"Rivales"}),e.jsx("ul",{className:"space-y-2",children:t.rivals.map((g,f)=>{const I=g.toLowerCase().replace(/\s+/g,"-");return e.jsx("li",{children:e.jsx(w,{to:`/personajes/${I}`,className:"text-pink-500 hover:underline",children:g})},f)})})]})]})]})]}),o&&e.jsx(nt,{title:`¡Mira este personaje de Bombardino: ${t.name}!`,url:`${window.location.origin}${window.location.pathname.includes("/#/")?"/#":""}/personajes/${t.name.toLowerCase().replace(/\s+/g,"-")}`,onClose:()=>r(!1)})]})}const pt=()=>{var c;const{characterSlug:t}=Ie(),s=Pe(),{characters:a,loading:n}=q(),[i,o]=l.useState(!1);if(l.useEffect(()=>{if(!n&&(!t||a.length>0&&!a.some(d=>d.name.toLowerCase().replace(/\s+/g,"-")===t))){o(!0);const d=setTimeout(()=>{s("/personajes")},2e3);return()=>clearTimeout(d)}},[t,a,s,n]),n)return e.jsx("div",{className:"flex justify-center items-center min-h-[calc(100vh-80px)] bg-brainrot-darker",children:e.jsx(V,{size:"lg"})});if(i)return e.jsxs("div",{className:"flex flex-col justify-center items-center min-h-[calc(100vh-80px)] bg-brainrot-darker text-white px-4 text-center",children:[e.jsx(Ve,{className:"w-16 h-16 text-yellow-500 mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Personaje no encontrado"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"El personaje que buscas no existe o ha sido eliminado."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirigiendo a la página de personajes..."})]});const r=a.find(d=>d.name.toLowerCase().replace(/\s+/g,"-")===t);return r?e.jsxs(e.Fragment,{children:[e.jsxs(_e,{children:[e.jsx("title",{children:`${r.name} | Personajes Bombardino`}),e.jsx("meta",{name:"description",content:`Conoce todo sobre ${r.name}, ${r.type.toLowerCase()} del universo Bombardino. ${(c=r.description)==null?void 0:c.substring(0,150)}...`}),e.jsx("meta",{property:"og:title",content:`${r.name} | Personajes Bombardino`}),e.jsx("meta",{property:"og:description",content:`Conoce todo sobre ${r.name}, ${r.type.toLowerCase()} del universo Bombardino`}),e.jsx("meta",{property:"og:image",content:r.image}),e.jsx("meta",{property:"og:type",content:"profile"})]}),e.jsx("div",{className:"min-h-screen bg-brainrot-darker",children:e.jsx(it,{character:r})})]}):e.jsxs("div",{className:"flex flex-col justify-center items-center min-h-[calc(100vh-80px)] bg-brainrot-darker text-white px-4 text-center",children:[e.jsx(V,{size:"lg"}),e.jsx("p",{className:"mt-4 text-gray-400",children:"Cargando personaje..."})]})};export{pt as default};
