import{c as M,r as d,u as N,v as q,j as e,M as R,J as i,B as T,U as A,N as B}from"./index-CiLMHb81.js";import{L as G,I as n}from"./input-Cp4B0tgO.js";import{L as o}from"./label-Cpd2nGGM.js";import{M as u}from"./mail-ZsJWCdYy.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h=M("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),J=()=>{const[t,x]=d.useState(""),[a,g]=d.useState(""),[p,f]=d.useState(""),[j,w]=d.useState(""),[v,c]=d.useState(!1),[r,m]=d.useState("login"),{login:k,loginWithGoogle:C,register:P,resetPassword:F,isLoading:b}=N(),y=q(),L=async s=>{if(s.preventDefault(),!t||!t.includes("@")){i.error("Introduce un email válido");return}c(!0);try{let l=!1;switch(r){case"login":if(!a){i.error("Introduce tu contraseña"),c(!1);return}l=await k(t,a);break;case"register":if(!a){i.error("Introduce una contraseña"),c(!1);return}if(a.length<6){i.error("La contraseña debe tener al menos 6 caracteres"),c(!1);return}if(a!==j){i.error("Las contraseñas no coinciden"),c(!1);return}l=await P(t,a,p);break;case"resetPassword":l=await F(t);break}l&&r!=="resetPassword"?setTimeout(()=>{y("/")},1500):l&&r==="resetPassword"&&m("login")}catch(l){console.error(l),i.error("Error al procesar la solicitud")}finally{c(!1)}},I=()=>{switch(r){case"login":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(u,{className:"h-5 w-5 text-gray-500"})}),e.jsx(n,{id:"email",type:"email",placeholder:"tu@ejemplo.com",value:t,onChange:s=>x(s.target.value),className:"pl-10 bg-brainrot-dark border-gray-700 text-white placeholder:text-gray-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(o,{htmlFor:"password",children:"Contraseña"}),e.jsx("button",{type:"button",onClick:()=>m("resetPassword"),className:"text-xs text-brainrot-blue hover:underline",children:"¿Olvidaste tu contraseña?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(h,{className:"h-5 w-5 text-gray-500"})}),e.jsx(n,{id:"password",type:"password",placeholder:"********",value:a,onChange:s=>g(s.target.value),className:"pl-10 bg-brainrot-dark border-gray-700 text-white placeholder:text-gray-500",required:!0})]})]})]});case"register":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"name",children:"Nombre"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(A,{className:"h-5 w-5 text-gray-500"})}),e.jsx(n,{id:"name",type:"text",placeholder:"Tu nombre",value:p,onChange:s=>f(s.target.value),className:"pl-10 bg-brainrot-dark border-gray-700 text-white placeholder:text-gray-500"})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(u,{className:"h-5 w-5 text-gray-500"})}),e.jsx(n,{id:"email",type:"email",placeholder:"tu@ejemplo.com",value:t,onChange:s=>x(s.target.value),className:"pl-10 bg-brainrot-dark border-gray-700 text-white placeholder:text-gray-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"password",children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(h,{className:"h-5 w-5 text-gray-500"})}),e.jsx(n,{id:"password",type:"password",placeholder:"Mínimo 6 caracteres",value:a,onChange:s=>g(s.target.value),className:"pl-10 bg-brainrot-dark border-gray-700 text-white placeholder:text-gray-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"confirmPassword",children:"Confirmar contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(h,{className:"h-5 w-5 text-gray-500"})}),e.jsx(n,{id:"confirmPassword",type:"password",placeholder:"Repite tu contraseña",value:j,onChange:s=>w(s.target.value),className:"pl-10 bg-brainrot-dark border-gray-700 text-white placeholder:text-gray-500",required:!0})]})]})]});case"resetPassword":return e.jsxs("div",{children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Introduce tu email y te enviaremos instrucciones para restablecer tu contraseña."}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(u,{className:"h-5 w-5 text-gray-500"})}),e.jsx(n,{id:"email",type:"email",placeholder:"tu@ejemplo.com",value:t,onChange:s=>x(s.target.value),className:"pl-10 bg-brainrot-dark border-gray-700 text-white placeholder:text-gray-500",required:!0})]})]})}},S=()=>{switch(r){case"login":return"Iniciar sesión";case"register":return"Crear cuenta";case"resetPassword":return"Recuperar contraseña"}},E=()=>{switch(r){case"login":return"Iniciar sesión";case"register":return"Registrarse";case"resetPassword":return"Enviar instrucciones"}};return e.jsxs("div",{className:"bg-brainrot-light p-8 rounded-lg shadow-lg max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:S()}),e.jsx("p",{className:"text-gray-400",children:r==="login"?"Accede para votar por tus personajes favoritos":r==="register"?"Únete y crea tus propios personajes":"Recupera el acceso a tu cuenta"})]}),r!=="resetPassword"&&e.jsx("div",{className:"mb-6",children:e.jsx(R,{onSuccess:s=>{s.credential&&(C(s.credential),y("/"))},onError:()=>{i.error("Error al iniciar sesión con Google")},theme:"filled_blue",shape:"pill",width:"100%",text:"signin_with",locale:"es"})}),r!=="resetPassword"&&e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-gray-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-brainrot-light px-2 text-gray-400",children:"o continúa con"})})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[I(),e.jsx(T,{type:"submit",className:"w-full bg-brainrot-blue hover:bg-brainrot-blue/90",disabled:v||b,children:v||b?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}),"Procesando..."]}):E()})]}),e.jsx("div",{className:"mt-6 text-center",children:r==="login"?e.jsxs("p",{className:"text-sm text-gray-500",children:["¿No tienes una cuenta?",e.jsx("button",{type:"button",onClick:()=>m("register"),className:"ml-1 text-brainrot-blue hover:underline",children:"Regístrate"})]}):r==="register"?e.jsxs("p",{className:"text-sm text-gray-500",children:["¿Ya tienes una cuenta?",e.jsx("button",{type:"button",onClick:()=>m("login"),className:"ml-1 text-brainrot-blue hover:underline",children:"Inicia sesión"})]}):e.jsx("p",{className:"text-sm text-gray-500",children:e.jsx("button",{type:"button",onClick:()=>m("login"),className:"text-brainrot-blue hover:underline",children:"Volver al inicio de sesión"})})})]})},D=()=>{const{isAuthenticated:t}=N();return t?e.jsx(B,{to:"/"}):e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(J,{})})})};export{D as default};
